package src.org.micromanager.plugin.serialPortHandling;

import java.util.ArrayList;
import java.util.Arrays;

import mmcorej.CMMCore;

import org.micromanager.api.ScriptInterface;

public class InputMapper {
	private CMMCore core_;
	private ScriptInterface gui_;
	private InputMappingButtonsWindow buttonsWindow;
	private InputMappingPropertyWindow propertyWindow;
	
	public InputMapper(ScriptInterface app){
		gui_ = app;
		core_ = gui_.getMMCore();
		buttonsWindow = new InputMappingButtonsWindow();
		
		
		/**Making an Array of String Arrays which look like this:
		 * 0:DeviceName ; 1:deviceProperty0; 2:deviceProperty1; ...
		*/
		try {
			String[] devices = core_.getDeviceAdapterNames().toArray();
			String[][] deviceProps = new String[devices.length][];
			for(int i = 0; i < devices.length; i++){
				ArrayList<String> list = new ArrayList<String>(Arrays.asList(core_.getDevicePropertyNames(devices[i]).toArray()));
				list.add(0, devices[i]);
				deviceProps[i] = (String[])list.toArray();
			}
			propertyWindow = new InputMappingPropertyWindow(deviceProps);
		} catch (Exception e) {
			e.printStackTrace();
		}
	}
	
	
}
