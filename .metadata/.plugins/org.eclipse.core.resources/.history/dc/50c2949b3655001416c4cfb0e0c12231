package src.org.micromanager.plugin.serialPortHandling;

import java.util.ArrayList;
import java.util.Arrays;

import mmcorej.CMMCore;

import org.micromanager.api.ScriptInterface;

public class InputMapper {
	private CMMCore core_;
	private ScriptInterface gui_;
	private InputMappingButtonsWindow buttonsWindow;
	private InputMappingPropertyWindow propertyWindow;
	
	public static void main(String[] args) {
		InputMapper iM = new InputMapper(null);
		
	}
	
	public InputMapper(ScriptInterface app){
		try{
			gui_ = app;
			core_ = gui_.getMMCore();
		}
		catch(NullPointerException nPe){
			nPe.printStackTrace();
		}
		buttonsWindow = new InputMappingButtonsWindow();
		
		
		/*Making an Array of String Arrays which look like this:
		 0:DeviceName ; 1:deviceProperty0; 2:deviceProperty1; ...
		*/
		try {
			//String[] devices = core_.getDeviceAdapterNames().toArray();
			String[] devices = {"Camera"};
			String[][] deviceProps = new String[devices.length][];
			for(int i = 0; i < devices.length; i++){
				//ArrayList<String> list = new ArrayList<String>(Arrays.asList(core_.getDevicePropertyNames(devices[i]).toArray()));
				ArrayList<String> list = new ArrayList<String>();
				list.add("bla1");
				list.add("bla2");
				list.add(0, devices[i]);
				deviceProps[i] = (String)(list.toArray());
			}
			propertyWindow = new InputMappingPropertyWindow(deviceProps);
		} catch (Exception e) {
			e.printStackTrace();
		}
	}
	
	
}
